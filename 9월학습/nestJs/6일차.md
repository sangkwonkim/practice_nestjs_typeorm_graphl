Harnessing the power of TypeScript & GraphQL
GraphQL은 API를 위한 강력한 쿼리 언어이며 기존 데이터로 쿼리를 수행할 수 있는 런타임임. 
REST API에서 일반적으로 발견되는 많은 문제를 해결할 수 있음. 

GraphQL은 TypeScript와 결합되어 GraphQL 쿼리와 함께 더 나은 유형 안전성을 개발하여 end-to-end 타이핑을 제공함.

Installation
# For Express and Apollo (default)
$ npm i @nestjs/graphql @nestjs/apollo graphql apollo-server-express


Overview
Nest는 GraphQL 응용 프로그램을 구축하는 code first과 schema first methods 두 방법을 제공함. 
code first methods에서는 decorators 및 TypeScript classes를 사용하여 해당 GraphQL 스키마를 생성하는데, 이 방법은 TypeScript를 단독으로 사용하고 언어 구문 간의 컨텍스트 전환을 피하는 경우에 유용함.

schema first methods에서는 GraphQL SDL(Schema Definition Language) 파일을 사용함.
SDL은 서로 다른 플랫폼 간에 스키마 파일을 공유하는 language-agnostic way임. 

Nest는 GraphQL 스키마를 기반으로 (클래스 또는 인터페이스를 사용하여) TypeScript 정의를 자동으로 생성하여 중복 보일러 플레이트 코드를 작성할 필요성을 줄여줌.


Getting started with GraphQL & TypeScript
패키지를 다운로드 받으면 GraphQLModule를 import하고, forRoot() static method를 사용해서 구성할 수 있음

import { Module } from '@nestjs/common';
import { GraphQLModule } from '@nestjs/graphql';
import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';

@Module({
  imports: [
    GraphQLModule.forRoot<ApolloDriverConfig>({
      driver: ApolloDriver,
    }),
  ],
})
export class AppModule {}


forRoot() 메서드는 options object를 인수로 사용하는데, 이러한 옵션은 기본 driver instance로 전달됨. 예를 들어, playground를 사용하지 않도록 설정하고 debug mode를 끄려면(Apollo의 경우) 다음 옵션을 전달할 수 있음.

import { Module } from '@nestjs/common';
import { GraphQLModule } from '@nestjs/graphql';
import { ApolloDriver, ApolloDriverConfig } from '@nestjs/apollo';

@Module({
  imports: [
    GraphQLModule.forRoot<ApolloDriverConfig>({
      driver: ApolloDriver,
      debug: false,
      playground: false,
    }),
  ],
})
export class AppModule {}


GraphQL playground#
playground는 GraphQL 서버와 동일한 URL에서 기본적으로 사용할 수 있는 graphical, interactive, in-browser GraphQL IDE임. 
playground에 액세스하려면 기본 GraphQL 서버가 구성되어 실행 중이어야 함.
애플리케이션을 백그라운드에서 실행 중인 상태에서 웹 브라우저를 열고 http://localhost:3000/graphql(호스트 및 포트는 구성에 따라 달라질 수 있음)으로 이동할 수 있음.


여러 엔드포인트
@nestjs/graphql 모듈의 또 다른 유용한 기능은 한 번에 여러 엔드포인트를 제공하는 것임. 
이를 통해 어떤 모듈이 어떤 엔드포인트에 포함되어야 하는지 결정할 수 있음. 기본적으로 GraphQL 전체 앱에서 resolvers를 검색함. 이 스캔을 모듈의 하위 집합으로만 제한하려면 include 속성을 사용하면 됨

GraphQLModule.forRoot({
  include: [CatsModule],
})